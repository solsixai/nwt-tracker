<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NWT 5-Year Journey</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4a90e2">


<style>
:root { --primary:#4a90e2; --bg:#f4f7f6; --text:#333; }
body {
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    background:var(--bg); color:var(--text);
    margin:0; padding:20px; display:flex; justify-content:center;
}
.container {
    max-width:520px; width:100%;
    background:white; padding:20px;
    border-radius:15px;
    box-shadow:0 4px 15px rgba(0,0,0,.1);
}
h2 { color:var(--primary); text-align:center; margin-bottom:5px; }
.stats { text-align:center; font-size:.9em; color:#666; margin-bottom:15px; }

.reading-card {
    border-left:5px solid var(--primary);
    padding:15px; background:#eef5ff;
    border-radius:8px; margin-bottom:15px;
    font-size:1.05em;
}

button {
    background:var(--primary); color:white;
    border:none; padding:12px;
    border-radius:8px; width:100%;
    font-size:16px; cursor:pointer;
    margin-top:10px;
}
button.secondary { background:#666; }
button:active { opacity:.85; }

textarea {
    width:100%; height:90px;
    border:1px solid #ddd;
    border-radius:8px;
    padding:10px; font-size:15px;
}

.history { margin-top:25px; border-top:1px solid #eee; padding-top:15px; }
.log-item {
    border:1px solid #eee;
    border-radius:8px;
    padding:10px; margin-bottom:10px;
    font-size:.9em;
}
.log-date { color:var(--primary); font-weight:bold; }
.star { font-size:1.2em; margin-left:5px; }
input[type=file]{ display:none; }
</style>
</head>

<body>
<div class="container">
<h2>NWT 5-Year Tracker</h2>
<div class="stats" id="progressInfo">Loading‚Ä¶</div>

<div class="reading-card">
<strong>Today‚Äôs Reading:</strong><br>
<span id="todayReading"></span>
</div>

<label><strong>Daily Meditation</strong></label>
<textarea id="dailyLog" placeholder="What did you learn today?"></textarea>

<button onclick="completeDay()">Complete Day ‚≠ê</button>
<button class="secondary" onclick="backupData()">Backup Progress</button>
<button class="secondary" onclick="document.getElementById('importFile').click()">Import Backup</button>
<input type="file" id="importFile" accept=".json" onchange="importData(event)">

<div class="history" id="logHistory">
<h3>Completed Days</h3>
</div>
</div>

<script>
// ===== Bible Structure =====
const bibleBooks = [
 ["Genesis",50],["Exodus",40],["Leviticus",27],["Numbers",36],
 ["Deuteronomy",34],["Joshua",24],["Judges",21],["Ruth",4],
 ["1 Samuel",31],["2 Samuel",24],["1 Kings",22],["2 Kings",25],
 ["1 Chronicles",29],["2 Chronicles",36],["Ezra",10],["Nehemiah",13],
 ["Esther",10],["Job",42],["Psalms",150],["Proverbs",31],
 ["Ecclesiastes",12],["Song of Solomon",8],["Isaiah",66],
 ["Jeremiah",52],["Lamentations",5],["Ezekiel",48],["Daniel",12],
 ["Hosea",14],["Joel",3],["Amos",9],["Obadiah",1],["Jonah",4],
 ["Micah",7],["Nahum",3],["Habakkuk",3],["Zephaniah",3],
 ["Haggai",2],["Zechariah",14],["Malachi",4],
 ["Matthew",28],["Mark",16],["Luke",24],["John",21],
 ["Acts",28],["Romans",16],["1 Corinthians",16],["2 Corinthians",13],
 ["Galatians",6],["Ephesians",6],["Philippians",4],["Colossians",4],
 ["1 Thessalonians",5],["2 Thessalonians",3],["1 Timothy",6],
 ["2 Timothy",4],["Titus",3],["Philemon",1],["Hebrews",13],
 ["James",5],["1 Peter",5],["2 Peter",3],
 ["1 John",5],["2 John",1],["3 John",1],["Jude",1],["Revelation",22]
];

const TOTAL_CHAPTERS = 1189;
const TOTAL_DAYS = 1825;

// ===== Helpers =====
function getBookChapter(global) {
 let count=0;
 for (let [book,chap] of bibleBooks) {
   if (global<=count+chap) return `${book} ${global-count}`;
   count+=chap;
 }
 return "Finished üéâ";
}

function getCurrentDay() {
 return Number(localStorage.getItem("currentDay")||1);
}

// ===== Main Display =====
function updateDisplay(){
 let day=getCurrentDay();
 const start=Math.floor((day-1)*(TOTAL_CHAPTERS/TOTAL_DAYS))+1;
 const end=Math.floor(day*(TOTAL_CHAPTERS/TOTAL_DAYS))+1;

 document.getElementById("progressInfo").innerText =
 `Day ${day} of ${TOTAL_DAYS}`;

 document.getElementById("todayReading").innerText =
 `${getBookChapter(start)}${start!==end?" ‚Äì "+getBookChapter(end):""}`;

 renderLogs();
}

// ===== Completion =====
function completeDay(){
 let logs=JSON.parse(localStorage.getItem("logs")||"[]");
 let day=getCurrentDay();

 logs.unshift({
   day,
   date:new Date().toLocaleDateString(),
   text:document.getElementById("dailyLog").value||"(No note)"
 });

 localStorage.setItem("logs",JSON.stringify(logs));
 localStorage.setItem("currentDay",day+1);
 document.getElementById("dailyLog").value="";
 updateDisplay();
}

// ===== Logs =====
function renderLogs(){
 let logs=JSON.parse(localStorage.getItem("logs")||"[]");
 const div=document.getElementById("logHistory");

 if(!logs.length){
   div.innerHTML="<h3>Completed Days</h3><p>No days completed yet.</p>";
   return;
 }

 div.innerHTML="<h3>Completed Days</h3>"+logs.map(l=>`
 <div class="log-item">
 <span class="log-date">Day ${l.day} ‚≠ê</span><br>
 ${l.text}
 </div>`).join("");
}

// ===== Backup =====
function backupData(){
 const data={
   currentDay:getCurrentDay(),
   logs:JSON.parse(localStorage.getItem("logs")||"[]")
 };
 const blob=new Blob([JSON.stringify(data)],{type:"application/json"});
 const a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="nwt-reading-backup.json";
 a.click();
}

// ===== Import =====
function importData(e){
 const file=e.target.files[0];
 if(!file) return;
 const reader=new FileReader();
 reader.onload=()=>{
   const data=JSON.parse(reader.result);
   localStorage.setItem("currentDay",data.currentDay);
   localStorage.setItem("logs",JSON.stringify(data.logs));
   updateDisplay();
 };
 reader.readAsText(file);
}

// ===== Init =====
updateDisplay();
</script>
</body>
</html>

